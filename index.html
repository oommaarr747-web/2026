<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
            overflow-x: auto;
        }

        .tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab:hover {
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .month-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .month-btn {
            padding: 8px 16px;
            background: #f0f0f0;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .month-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .month-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .expense-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .expense-item {
            display: flex;
            flex-direction: column;
        }

        .remaining-badge {
            margin-top: 5px;
            padding: 5px 10px;
            background: #e8f5e9;
            border-radius: 5px;
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            color: #2e7d32;
        }

        .remaining-badge.negative {
            background: #ffebee;
            color: #c62828;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 16px;
        }

        .sub-label {
            font-size: 13px;
            color: #666;
            font-weight: 500;
            margin-bottom: 5px;
        }

        input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
        }

        .salary-input {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .salary-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .expenses-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
        }

        .expenses-title {
            color: #764ba2;
            margin-bottom: 20px;
            font-size: 20px;
            text-align: center;
        }

        .result-section {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            text-align: center;
        }

        .result-label {
            color: white;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .result-value {
            color: white;
            font-size: 36px;
            font-weight: bold;
        }

        .total-expenses {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }

        .total-expenses-label {
            color: #333;
            font-size: 16px;
        }

        .total-expenses-value {
            color: #333;
            font-size: 24px;
            font-weight: bold;
            margin-top: 5px;
        }

        .icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .clear-button {
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .clear-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .clear-button:active {
            transform: translateY(0);
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .summary-card {
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .summary-card.deficit {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
        }

        .summary-card.surplus {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
        }

        .summary-month {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .summary-details {
            font-size: 14px;
            opacity: 0.9;
            margin: 5px 0;
        }

        .summary-remaining {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
        }

        .year-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 15px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        .year-summary h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .year-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="icon" style="text-align: center;">ğŸ’°</div>
        <h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('calculator')">Ø§Ù„Ø­Ø§Ø³Ø¨Ø©</button>
            <button class="tab" onclick="switchTab('summary')">Ù…Ù„Ø®Øµ Ø§Ù„Ø³Ù†Ø©</button>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø­Ø§Ø³Ø¨Ø© -->
        <div id="calculator" class="tab-content active">
            <div class="month-selector" id="monthSelector"></div>

            <div class="input-group">
                <label for="salary">Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ</label>
                <input type="number" id="salary" class="salary-input" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ø§ØªØ¨Ùƒ Ø§Ù„Ø´Ù‡Ø±ÙŠ" min="0">
            </div>

            <div class="expenses-section">
                <h2 class="expenses-title">ğŸ“Š Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h2>
                
                <div class="input-group">
                    <label>ğŸ  Ø§Ù„Ù…Ù†Ø²Ù„</label>
                    <div class="expense-row">
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
                            <input type="number" id="house-expected" placeholder="0" min="0">
                        </div>
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØµØ±ÙˆÙ</div>
                            <input type="number" id="house" placeholder="0" min="0">
                        </div>
                    </div>
                    <div class="remaining-badge" id="house-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 0 Ø±ÙŠØ§Ù„</div>
                </div>

                <div class="input-group">
                    <label>ğŸš— Ø§Ù„Ø³ÙŠØ§Ø±Ø©</label>
                    <div class="expense-row">
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
                            <input type="number" id="car-expected" placeholder="0" min="0">
                        </div>
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØµØ±ÙˆÙ</div>
                            <input type="number" id="car" placeholder="0" min="0">
                        </div>
                    </div>
                    <div class="remaining-badge" id="car-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 0 Ø±ÙŠØ§Ù„</div>
                </div>

                <div class="input-group">
                    <label>ğŸ›’ Ø³ÙˆØ¨Ø±Ù…Ø§Ø±ÙƒØª</label>
                    <div class="expense-row">
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
                            <input type="number" id="supermarket-expected" placeholder="0" min="0">
                        </div>
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØµØ±ÙˆÙ</div>
                            <input type="number" id="supermarket" placeholder="0" min="0">
                        </div>
                    </div>
                    <div class="remaining-badge" id="supermarket-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 0 Ø±ÙŠØ§Ù„</div>
                </div>

                <div class="input-group">
                    <label>ğŸ’Š ØµÙŠØ¯Ù„ÙŠØ©</label>
                    <div class="expense-row">
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
                            <input type="number" id="pharmacy-expected" placeholder="0" min="0">
                        </div>
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØµØ±ÙˆÙ</div>
                            <input type="number" id="pharmacy" placeholder="0" min="0">
                        </div>
                    </div>
                    <div class="remaining-badge" id="pharmacy-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 0 Ø±ÙŠØ§Ù„</div>
                </div>

                <div class="input-group">
                    <label>ğŸ Ù…ÙƒØ§ÙØ¢Øª</label>
                    <div class="expense-row">
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
                            <input type="number" id="rewards-expected" placeholder="0" min="0">
                        </div>
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØµØ±ÙˆÙ</div>
                            <input type="number" id="rewards" placeholder="0" min="0">
                        </div>
                    </div>
                    <div class="remaining-badge" id="rewards-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 0 Ø±ÙŠØ§Ù„</div>
                </div>

                <div class="input-group">
                    <label>ğŸ“¦ Ù…ØªÙØ±Ù‚Ø©</label>
                    <div class="expense-row">
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
                            <input type="number" id="misc-expected" placeholder="0" min="0">
                        </div>
                        <div class="expense-item">
                            <div class="sub-label">Ø§Ù„Ù…ØµØ±ÙˆÙ</div>
                            <input type="number" id="misc" placeholder="0" min="0">
                        </div>
                    </div>
                    <div class="remaining-badge" id="misc-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 0 Ø±ÙŠØ§Ù„</div>
                </div>
            </div>

            <div class="total-expenses">
                <div class="total-expenses-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</div>
                <div class="total-expenses-value" id="totalExpenses">0 Ø±ÙŠØ§Ù„</div>
            </div>

            <div class="result-section">
                <div class="result-label">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø±Ø§ØªØ¨</div>
                <div class="result-value" id="remaining">0 Ø±ÙŠØ§Ù„</div>
            </div>

            <button class="clear-button" onclick="clearAllData()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ù…Ù„Ø®Øµ Ø§Ù„Ø³Ù†Ø© -->
        <div id="summary" class="tab-content">
            <div class="year-summary">
                <h2>ğŸ“… Ù…Ù„Ø®Øµ Ø§Ù„Ø³Ù†Ø© 2025</h2>
                <div class="year-stats">
                    <div class="stat-box">
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ÙˆØ§ØªØ¨</div>
                        <div class="stat-value" id="totalSalaries">0 Ø±ÙŠØ§Ù„</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</div>
                        <div class="stat-value" id="totalAllExpenses">0 Ø±ÙŠØ§Ù„</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Ø§Ù„ØµØ§ÙÙŠ Ø§Ù„Ø³Ù†ÙˆÙŠ</div>
                        <div class="stat-value" id="yearlyNet">0 Ø±ÙŠØ§Ù„</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù…Ø³ØªÙ†Ø²ÙØ©</div>
                        <div class="stat-value" id="deficitMonths">0</div>
                    </div>
                </div>
            </div>

            <div class="summary-grid" id="summaryGrid"></div>
        </div>
    </div>

    <script>
        const months = [
            'ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ',
            'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'
        ];
        
        const categories = ['house', 'car', 'supermarket', 'pharmacy', 'rewards', 'misc'];
        let currentMonth = new Date().getMonth();
        let storage = {};

        // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø´Ù‡Ø±
        const monthSelector = document.getElementById('monthSelector');
        months.forEach((month, index) => {
            const btn = document.createElement('button');
            btn.className = 'month-btn' + (index === currentMonth ? ' active' : '');
            btn.textContent = month;
            btn.onclick = () => switchMonth(index);
            monthSelector.appendChild(btn);
        });

        const inputs = {
            salary: document.getElementById('salary')
        };

        categories.forEach(cat => {
            inputs[cat] = document.getElementById(cat);
            inputs[cat + '-expected'] = document.getElementById(cat + '-expected');
        });

        const totalExpensesEl = document.getElementById('totalExpenses');
        const remainingEl = document.getElementById('remaining');

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'summary') {
                updateSummary();
            }
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ù‡Ø±
        function switchMonth(monthIndex) {
            saveCurrentMonth();
            currentMonth = monthIndex;
            
            document.querySelectorAll('.month-btn').forEach((btn, idx) => {
                btn.classList.toggle('active', idx === monthIndex);
            });
            
            loadMonth(monthIndex);
        }

        // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
        function saveCurrentMonth() {
            const monthKey = `month_${currentMonth}`;
            const monthData = {
                salary: parseFloat(inputs.salary.value) || 0
            };
            
            categories.forEach(cat => {
                monthData[cat] = parseFloat(inputs[cat].value) || 0;
                monthData[cat + '_expected'] = parseFloat(inputs[cat + '-expected'].value) || 0;
            });
            
            storage[monthKey] = monthData;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ù‡Ø±
        function loadMonth(monthIndex) {
            const monthKey = `month_${monthIndex}`;
            const monthData = storage[monthKey] || {};
            
            inputs.salary.value = monthData.salary || '';
            
            categories.forEach(cat => {
                inputs[cat].value = monthData[cat] || '';
                inputs[cat + '-expected'].value = monthData[cat + '_expected'] || '';
            });
            
            calculate();
        }

        function calculate() {
            const salary = parseFloat(inputs.salary.value) || 0;
            let totalExpenses = 0;

            categories.forEach(cat => {
                const expected = parseFloat(inputs[cat + '-expected'].value) || 0;
                const spent = parseFloat(inputs[cat].value) || 0;
                const remaining = expected - spent;

                totalExpenses += spent;

                const remainingBadge = document.getElementById(cat + '-remaining');
                remainingBadge.textContent = `Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${remaining.toFixed(2)} Ø±ÙŠØ§Ù„`;
                
                if (remaining < 0) {
                    remainingBadge.classList.add('negative');
                } else {
                    remainingBadge.classList.remove('negative');
                }
            });

            const remaining = salary - totalExpenses;

            totalExpensesEl.textContent = totalExpenses.toFixed(2) + ' Ø±ÙŠØ§Ù„';
            remainingEl.textContent = remaining.toFixed(2) + ' Ø±ÙŠØ§Ù„';

            if (remaining < 0) {
                remainingEl.style.color = '#ff6b6b';
                remainingEl.parentElement.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)';
            } else {
                remainingEl.style.color = 'white';
                remainingEl.parentElement.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
            }

            saveCurrentMonth();
        }

        // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ø®Øµ Ø§Ù„Ø³Ù†Ø©
        function updateSummary() {
            const summaryGrid = document.getElementById('summaryGrid');
            summaryGrid.innerHTML = '';
            
            let totalSalaries = 0;
            let totalAllExpenses = 0;
            let deficitCount = 0;

            months.forEach((month, index) => {
                const monthKey = `month_${index}`;
                const monthData = storage[monthKey] || {};
                
                const salary = monthData.salary || 0;
                let expenses = 0;
                
                categories.forEach(cat => {
                    expenses += monthData[cat] || 0;
                });
                
                const remaining = salary - expenses;
                
                if (salary > 0 || expenses > 0) {
                    totalSalaries += salary;
                    totalAllExpenses += expenses;
                    
                    if (remaining < 0) {
                        deficitCount++;
                    }
                    
                    const card = document.createElement('div');
                    card.className = 'summary-card' + (remaining < 0 ? ' deficit' : remaining > 0 ? ' surplus' : '');
                    card.innerHTML = `
                        <div class="summary-month">${month}</div>
                        <div class="summary-details">Ø§Ù„Ø±Ø§ØªØ¨: ${salary.toFixed(2)} Ø±ÙŠØ§Ù„</div>
                        <div class="summary-details">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: ${expenses.toFixed(2)} Ø±ÙŠØ§Ù„</div>
                        <div class="summary-remaining">${remaining < 0 ? 'Ø¹Ø¬Ø²' : 'ÙØ§Ø¦Ø¶'}: ${Math.abs(remaining).toFixed(2)} Ø±ÙŠØ§Ù„</div>
                    `;
                    summaryGrid.appendChild(card);
                }
            });

            const yearlyNet = totalSalaries - totalAllExpenses;
            
            document.getElementById('totalSalaries').textContent = totalSalaries.toFixed(2) + ' Ø±ÙŠØ§Ù„';
            document.getElementById('totalAllExpenses').textContent = totalAllExpenses.toFixed(2) + ' Ø±ÙŠØ§Ù„';
            document.getElementById('yearlyNet').textContent = yearlyNet.toFixed(2) + ' Ø±ÙŠØ§Ù„';
            document.getElementById('deficitMonths').textContent = deficitCount + ' Ø´Ù‡Ø±';
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ÙƒÙ„ Ø§Ù„Ø£Ø´Ù‡Ø±ØŸ')) {
                storage = {};
                inputs.salary.value = '';
                categories.forEach(cat => {
                    inputs[cat].value = '';
                    inputs[cat + '-expected'].value = '';
                });
                calculate();
            }
        }

        Object.values(inputs).forEach(input => {
            input.addEventListener('input', calculate);
        });

        loadMonth(currentMonth);
    </script>
</body>
</html>
